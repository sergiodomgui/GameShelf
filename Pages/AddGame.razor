@page "/add-game"
@using GameShelfWeb.Data
@using GameShelfWeb.Models
@inject GameRepository Repo
@inject NavigationManager Navigation

<h3>Añadir Nuevo Juego</h3>

<EditForm Model="@newGame" OnValidSubmit="HandleSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label for="title" class="form-label">Título</label>
        <InputText id="title" class="form-control" @bind-Value="newGame.Title" />
    </div>
    <div class="mb-3">
        <label for="platform" class="form-label">Plataforma</label>
        <InputText id="platform" class="form-control" @bind-Value="newGame.Platform" />
    </div>
    
    <button type="submit" class="btn btn-primary">Guardar Juego</button>
</EditForm>

@code {
    private Game newGame = new();

    private async Task HandleSubmit()
    {
        await Repo.AddAsync(newGame); //  Corrected call to AddAsync
        Navigation.NavigateTo("/"); // Go back to the main list
    }
}